const unknown_person =  `<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <clipPath id="body-clip">
      <path d="M152 165.5C152 107.786 198.786 61 256.5 61C314.214 61 361 107.786 361 165.5C361 213.5 328.5 243.5 296 268C265.5 291 256.5 315.5 256.5 344" 
            stroke-width="48" stroke-linecap="round" stroke-linejoin="round"/>
    </clipPath>
  </defs>
  <path d="M152 165.5C152 107.786 198.786 61 256.5 61C314.214 61 361 107.786 361 165.5C361 213.5 328.5 243.5 296 268C265.5 291 256.5 315.5 256.5 344" 
        stroke="black" stroke-width="72" stroke-linecap="round" stroke-linejoin="round"/>
  <circle cx="256" cy="435" r="45" fill="black"/>
  <path d="M152 165.5C152 107.786 198.786 61 256.5 61C314.214 61 361 107.786 361 165.5C361 213.5 328.5 243.5 296 268C265.5 291 256.5 315.5 256.5 344" 
        stroke="#42ADE2" stroke-width="48" stroke-linecap="round" stroke-linejoin="round"/>
  <circle cx="256" cy="435" r="33" fill="#42ADE2"/>
<g clip-path="url(#body-clip)">
    <path d="M165 160C165 120 195 90 235 90" stroke="#89D0F3" stroke-width="14" stroke-linecap="round" fill="none"/>
    <circle cx="230" cy="80" r="6" fill="#89D0F3"/>
    <path d="M345 200C330 230 305 255 285 275" stroke="#3388B1" stroke-width="14" stroke-linecap="round" fill="none"/>
  </g>
</svg>`;
const girl_person = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><title>Avatar-39</title><g id="Girl"><path d="M8,56v5.25a.75.75,0,0,0,.75.75H18V56Z" style="fill:#ffddd4"/><path d="M42,56v6h9.25a.75.75,0,0,0,.75-.75V56Z" style="fill:#ffddd4"/><path d="M34,5.07c-.011-.012,8.121-6.159,14-1.02,8,7-3,27.45,10,31.95,0,0-28.369,8.112-24.5-30.481Z" style="fill:#343544"/><path d="M17,25V13A10.994,10.994,0,0,1,28,2h2.53a7.243,7.243,0,0,1,3.8,1.08A7.383,7.383,0,0,1,37,6a7.182,7.182,0,0,1,6,7.08V25Z" style="fill:#494a59"/><path d="M36,31.7V40l-6,5-6-5V31.7a8.976,8.976,0,0,0,12,0Z" style="fill:#eac2b9"/><path d="M50.436,45.418C39.72,40.66,42.932,42.088,36,39l-6,5-6-5c-6.934,3.089-3.715,1.657-14.436,6.418A6,6,0,0,0,6,50.9V56.25a.75.75,0,0,0,.75.75H17v5H43V57H53.25a.75.75,0,0,0,.75-.75V50.9A6,6,0,0,0,50.436,45.418Z" style="fill:#4294ff"/><path d="M44,24v2a2.006,2.006,0,0,1-2,2H37.78A9.356,9.356,0,0,0,38,26V22h4A2.006,2.006,0,0,1,44,24Z" style="fill:#eac2b9"/><path d="M22.22,28H18a2.006,2.006,0,0,1-2-2V24a2.006,2.006,0,0,1,2-2h4v4A9.356,9.356,0,0,0,22.22,28Z" style="fill:#eac2b9"/><path d="M30,52.75a.75.75,0,0,0,.75-.75V43.375L30,44l-.75-.625V52A.75.75,0,0,0,30,52.75Z" style="fill:#2946ed"/><path d="M39,55.75H35a.75.75,0,0,1,0-1.5h4a.75.75,0,0,1,0,1.5Z" style="fill:#376cfb"/><path d="M44.5,52v5H43V52a.75.75,0,0,1,1.5,0Z" style="fill:#376cfb"/><path d="M17,52v5H15.5V52A.75.75,0,0,1,17,52Z" style="fill:#376cfb"/><polygon points="30 44 25 48 18.5 41.45 24 39 30 44" style="fill:#376cfb"/><polygon points="41.5 41.45 35 48 30 44 36 39 41.5 41.45" style="fill:#376cfb"/><path d="M21,17.347h0V26a9,9,0,0,0,9,9h0a9,9,0,0,0,9-9V20c-9.894-.284-13-6-13-6A9.628,9.628,0,0,1,21,17.347Z" style="fill:#ffddd4"/></g></svg>`;
const boy_person =  `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><title>Avatar-3</title><g id="Sweater-2" data-name="Sweater"><path d="M45,8v9.27A2,2,0,0,0,44,17H41V13s-2,0-5.4-3c0,0-3.6,4-12.6,4v3H20a2,2,0,0,0-1,.27V8a7,7,0,0,1,7-7H38a3,3,0,0,1,3,3A4,4,0,0,1,45,8Z" style="fill:#494a59"/><path d="M37.953,33.9,52.1,40.35A9.992,9.992,0,0,1,58,49.47V62.25a.75.75,0,0,1-.75.75H6.75A.75.75,0,0,1,6,62.25V49.47a9.992,9.992,0,0,1,5.9-9.12L26.051,33.9" style="fill:#4294ff"/><path d="M32.75,44.5V63h-1.5V44.5a.75.75,0,0,1,1.5,0Z" style="fill:#376cfb"/><path d="M48.75,51V63h-1.5V51a.75.75,0,0,1,1.5,0Z" style="fill:#376cfb"/><path d="M16.75,51V63h-1.5V51a.75.75,0,0,1,1.5,0Z" style="fill:#376cfb"/><path d="M38,26.7V33a6.009,6.009,0,0,1-6,6,6,6,0,0,1-6-6V26.71a8.991,8.991,0,0,0,12-.01Z" style="fill:#eac2b9"/><path d="M23,13v8a9,9,0,0,0,9,9h0a9,9,0,0,0,9-9V12s-2,0-5.4-3C35.6,9,32,13,23,13Z" style="fill:#ffddd4"/><path d="M44,16H41l-.226,7H44a2,2,0,0,0,2-2V18A2,2,0,0,0,44,16Z" style="fill:#eac2b9"/><path d="M23,16H20a2,2,0,0,0-2,2v3a2,2,0,0,0,2,2h3.225Z" style="fill:#eac2b9"/><path d="M38,30l.568.213a6,6,0,0,1,3.375,8.064,6.1,6.1,0,0,1-1.219,1.7L32,49s10.38-6.891,17.8-8.461a1.977,1.977,0,0,0,1.415-2.751C49.751,34.551,46.136,29.456,38,30" style="fill:#376cfb"/><path d="M26,30l-.568.213a6,6,0,0,0-3.375,8.064,6.1,6.1,0,0,0,1.219,1.7L32,49s-10.38-6.891-17.8-8.461a1.977,1.977,0,0,1-1.415-2.751C14.249,34.551,17.864,29.456,26,30" style="fill:#376cfb"/><path d="M42.45,36.01l-4.53-2.04A6.143,6.143,0,0,0,38,33V30l.57.21A5.988,5.988,0,0,1,42.45,36.01Z" style="fill:#2946ed"/><path d="M42.45,36.01a5.547,5.547,0,0,1-1.73,3.97L32,49l-8.72-9.02a5.548,5.548,0,0,1-1.73-3.97l4.53-2.05a5.994,5.994,0,0,0,10.16,3.28,5.9,5.9,0,0,0,1.68-3.27Z" style="fill:#343544"/><path d="M26.08,33.96l-4.53,2.05a5.988,5.988,0,0,1,3.88-5.8L26,30v3A6.017,6.017,0,0,0,26.08,33.96Z" style="fill:#2946ed"/></g></svg>`;
  // Populate profile info
  document.getElementById('std_profileName').textContent = student_Data.name;
  document.getElementById('std_profileClass').textContent = student_Data.classLevel;
  

// 1. Get the container
const avatarContainer = document.querySelector('.std_avatar_image');

// 2. Identify the gender safely
const gender = (student_Data.gender || "").toLowerCase();

// 3. Logic to pick the correct SVG string
let selectedSVG;

if (gender === "female") {
  selectedSVG = girl_person;
} else if (gender === "male") {
  selectedSVG = boy_person;
} else {
  selectedSVG = unknown_person;
}

// 4. Inject the SVG directly into the span
// No need for encodeURIComponent or data: URLs here!
avatarContainer.innerHTML = selectedSVG;
  
  // Toggle social icons + hide message box
  function std_toggleContact() {
    const container = document.getElementById('std_socialContainer');
    const arrow = document.getElementById('std_arrowIcon');
    const msgBox = document.getElementById('std_messageBox');
    
    container.classList.toggle('std_collapsed');
    arrow.classList.toggle('std_rotated');
    
    if (msgBox.style.display === 'block') {
      msgBox.style.display = 'none';
    }
  }
  

  // Gmail icon click → toggle message box
  document.querySelector('#std_gmail').parentElement.parentElement.addEventListener('click', function(e) {
    e.preventDefault();
    const box = document.getElementById('std_messageBox');
    box.style.display = (box.style.display === 'block') ? 'none' : 'block';
  });
  
  // Send button handler
  document.getElementById('std_sendMessageBtn').addEventListener('click', function() {
    const msg = document.getElementById('std_messageInput').value.trim();
    const status = document.getElementById('std_statusMsg');
    
    if (!msg) {
      status.textContent = "Please enter a message.";
      return;
    }
    
    status.textContent = "Sending...";
    
    fetch(student_Data.webhook, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ type:'suggestion', text_msg: msg, info:{name: student_Data.name, id: student_Data.id, class: student_Data.classLevel} })
      })
      .then(() => {
        status.textContent = "Message sent successfully ✅";
        document.getElementById('std_messageInput').value = "";
      })
      .catch(() => {
        status.textContent = "Error sending message ❌";
      });
  });
  // Menu button toggle for showing/hiding ID
/*
document.querySelector('.std_menu_btn').addEventListener('click', function() {
  const idBox = document.getElementById('std_idBox');
  
  if (idBox.style.display === 'block') {
    idBox.style.display = 'none'; // hide if visible
  } else {
    idBox.textContent = "ID: " + student_Data.id; // set ID text
    idBox.style.display = 'block'; // show if hidden
  }
});
*/

/*
document.addEventListener("click", (event) => {
  const userid_section = document.getElementById("std_student");
  const idBox = document.getElementById('std_idBox');
  if (idBox.style.display === 'block' &&
    !userid_section.contains(event.target) &&
    !idBox.contains(event.target)) {
    idBox.style.display = 'none';
  } else if (idBox.style.display === 'none') {
    idBox.textContent = "ID: " + student_Data.id; // set ID text
    idBox.style.display = 'block';
  }
});
*/
const btn = document.querySelector('.std_menu_btn');
const idBox = document.getElementById('std_idBox');
btn.addEventListener('click', () => {
  if (idBox.style.display === 'block') {
    idBox.style.display = 'none';
  } else {
    idBox.textContent = "ID: " + student_Data.id;
    idBox.style.display = 'block';
  }
});
// hide when clicking outside
document.addEventListener('click', (event) => {
  if (
    idBox.style.display === 'block' &&
    !btn.contains(event.target) &&
    !idBox.contains(event.target)
  ) {
    idBox.style.display = 'none';
  }
});


document.addEventListener("click", (event) => {
  const messbox_section = document.getElementById("std_student");
  const messbox_box = document.getElementById('std_messageBox');
  if (messbox_box.style.display === 'block' &&
    !messbox_section.contains(event.target) &&
    !messbox_box.contains(event.target)) {
    messbox_box.style.display = 'none';
  }
});